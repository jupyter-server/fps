
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Fast Pluggable System">
      
      
      
      
        <link rel="prev" href="../guide/">
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>API reference - FPS</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="black">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="FPS" class="md-header__button md-logo" aria-label="FPS" data-md-component="logo">
      
  <img src="../jupyter.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FPS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="black"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="black"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/jupyter-server/fps" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FPS" class="md-nav__button md-logo" aria-label="FPS" data-md-component="logo">
      
  <img src="../jupyter.svg" alt="logo">

    </a>
    FPS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jupyter-server/fps" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guide
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    API reference
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    API reference
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fps" class="md-nav__link">
    <span class="md-ellipsis">
      
        fps
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.Context" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fps.Context.aclose" class="md-nav__link">
    <span class="md-ellipsis">
      
        aclose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Context.add_teardown_callback" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_teardown_callback
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Context.get" class="md-nav__link">
    <span class="md-ellipsis">
      
        get
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Context.put" class="md-nav__link">
    <span class="md-ellipsis">
      
        put
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.Module" class="md-nav__link">
    <span class="md-ellipsis">
      
        Module
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fps.Module.modules" class="md-nav__link">
    <span class="md-ellipsis">
      
        modules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.name" class="md-nav__link">
    <span class="md-ellipsis">
      
        name
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.parent" class="md-nav__link">
    <span class="md-ellipsis">
      
        parent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.path" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.started" class="md-nav__link">
    <span class="md-ellipsis">
      
        started
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.add_module" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_module
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.add_teardown_callback" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_teardown_callback
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.all_freed" class="md-nav__link">
    <span class="md-ellipsis">
      
        all_freed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.done" class="md-nav__link">
    <span class="md-ellipsis">
      
        done
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.drop" class="md-nav__link">
    <span class="md-ellipsis">
      
        drop
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.drop_all" class="md-nav__link">
    <span class="md-ellipsis">
      
        drop_all
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.exit_app" class="md-nav__link">
    <span class="md-ellipsis">
      
        exit_app
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.freed" class="md-nav__link">
    <span class="md-ellipsis">
      
        freed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.get" class="md-nav__link">
    <span class="md-ellipsis">
      
        get
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.prepare" class="md-nav__link">
    <span class="md-ellipsis">
      
        prepare
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.put" class="md-nav__link">
    <span class="md-ellipsis">
      
        put
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.run" class="md-nav__link">
    <span class="md-ellipsis">
      
        run
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.start" class="md-nav__link">
    <span class="md-ellipsis">
      
        start
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.stop" class="md-nav__link">
    <span class="md-ellipsis">
      
        stop
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.SharedValue" class="md-nav__link">
    <span class="md-ellipsis">
      
        SharedValue
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SharedValue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fps.SharedValue.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.SharedValue.aclose" class="md-nav__link">
    <span class="md-ellipsis">
      
        aclose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.SharedValue.freed" class="md-nav__link">
    <span class="md-ellipsis">
      
        freed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.SharedValue.get" class="md-nav__link">
    <span class="md-ellipsis">
      
        get
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.Value" class="md-nav__link">
    <span class="md-ellipsis">
      
        Value
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Value">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fps.Value.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Value.drop" class="md-nav__link">
    <span class="md-ellipsis">
      
        drop
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Value.unwrap" class="md-nav__link">
    <span class="md-ellipsis">
      
        unwrap
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.current_context" class="md-nav__link">
    <span class="md-ellipsis">
      
        current_context
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.get" class="md-nav__link">
    <span class="md-ellipsis">
      
        get
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.put" class="md-nav__link">
    <span class="md-ellipsis">
      
        put
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fps" class="md-nav__link">
    <span class="md-ellipsis">
      
        fps
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.Context" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fps.Context.aclose" class="md-nav__link">
    <span class="md-ellipsis">
      
        aclose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Context.add_teardown_callback" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_teardown_callback
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Context.get" class="md-nav__link">
    <span class="md-ellipsis">
      
        get
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Context.put" class="md-nav__link">
    <span class="md-ellipsis">
      
        put
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.Module" class="md-nav__link">
    <span class="md-ellipsis">
      
        Module
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fps.Module.modules" class="md-nav__link">
    <span class="md-ellipsis">
      
        modules
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.name" class="md-nav__link">
    <span class="md-ellipsis">
      
        name
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.parent" class="md-nav__link">
    <span class="md-ellipsis">
      
        parent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.path" class="md-nav__link">
    <span class="md-ellipsis">
      
        path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.started" class="md-nav__link">
    <span class="md-ellipsis">
      
        started
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.add_module" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_module
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.add_teardown_callback" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_teardown_callback
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.all_freed" class="md-nav__link">
    <span class="md-ellipsis">
      
        all_freed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.done" class="md-nav__link">
    <span class="md-ellipsis">
      
        done
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.drop" class="md-nav__link">
    <span class="md-ellipsis">
      
        drop
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.drop_all" class="md-nav__link">
    <span class="md-ellipsis">
      
        drop_all
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.exit_app" class="md-nav__link">
    <span class="md-ellipsis">
      
        exit_app
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.freed" class="md-nav__link">
    <span class="md-ellipsis">
      
        freed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.get" class="md-nav__link">
    <span class="md-ellipsis">
      
        get
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.prepare" class="md-nav__link">
    <span class="md-ellipsis">
      
        prepare
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.put" class="md-nav__link">
    <span class="md-ellipsis">
      
        put
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.run" class="md-nav__link">
    <span class="md-ellipsis">
      
        run
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.start" class="md-nav__link">
    <span class="md-ellipsis">
      
        start
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Module.stop" class="md-nav__link">
    <span class="md-ellipsis">
      
        stop
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.SharedValue" class="md-nav__link">
    <span class="md-ellipsis">
      
        SharedValue
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SharedValue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fps.SharedValue.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.SharedValue.aclose" class="md-nav__link">
    <span class="md-ellipsis">
      
        aclose
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.SharedValue.freed" class="md-nav__link">
    <span class="md-ellipsis">
      
        freed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.SharedValue.get" class="md-nav__link">
    <span class="md-ellipsis">
      
        get
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.Value" class="md-nav__link">
    <span class="md-ellipsis">
      
        Value
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Value">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fps.Value.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Value.drop" class="md-nav__link">
    <span class="md-ellipsis">
      
        drop
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fps.Value.unwrap" class="md-nav__link">
    <span class="md-ellipsis">
      
        unwrap
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.current_context" class="md-nav__link">
    <span class="md-ellipsis">
      
        current_context
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.get" class="md-nav__link">
    <span class="md-ellipsis">
      
        get
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fps.put" class="md-nav__link">
    <span class="md-ellipsis">
      
        put
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="api-reference">API reference</h1>


<div class="doc doc-object doc-module">



<a id="fps"></a>
    <div class="doc doc-contents first">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="fps.Context" class="doc doc-heading">
            <code>Context</code>


</h2>


    <div class="doc doc-contents ">



        <p>A context allows to share values. When a shared value is put in a context,
it can be borrowed by calling <code>await context.get(value_type)</code>, where <code>value_type</code>
is the type of the desired value.</p>
<p>A context must be used with an async context manager. It exits after all shared values
that were borrowed have been dropped. The shared values will be torn down, if applicable.</p>
<p>Contexts can be nested. When a value is shared in a context, it is made available to all its
children, but not its parent.</p>











  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="fps.Context.aclose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">aclose</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_exc_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_exc_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_exc_tb</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Close the context, after all shared values that were borrowed have been dropped.
The shared values will be torn down, if applicable.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time to wait for all shared values to be freed.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TimeoutError">TimeoutError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the context could not be closed in time.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Context.add_teardown_callback" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_teardown_callback</span><span class="p">(</span><span class="n">teardown_callback</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Register a callback that will be called at context teardown. The callbacks
will be called in the inverse order than they were added.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>teardown_callback</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[..., <span title="typing.Any">Any</span>] | <span title="collections.abc.Callable">Callable</span>[..., <span title="collections.abc.Awaitable">Awaitable</span>[<span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The callback to add.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Context.get" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">value_type</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Get a value from the context, with the given type.
The value will be returned if/when it is put in the context and when it accepts
to be borrowed (borrowing can be limited with a maximum number of borrowers).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value_type</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<span title="fps._context.T">T</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of the value to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time to wait to get the value.</p>
              </div>
            </td>
            <td>
                  <code><span title="float">float</span>(&#39;inf&#39;)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Value (fps._context.Value)" href="#fps.Value">Value</a>[<span title="fps._context.T">T</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The borrowed <code>Value</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TimeoutError">TimeoutError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the value could not be borrowed in time.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Context.put" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">put</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_borrowers</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="n">manage</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">teardown_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shared_value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Put a value in the context so that it can be shared.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="fps._context.T">T</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to put in the context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>types</code>
            </td>
            <td>
                  <code><span title="typing.Iterable">Iterable</span> | <span title="typing.Any">Any</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type(s) to register the value as. If not
provided, the value type will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_borrowers</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of times the shared value can be borrowed at the same time.</p>
              </div>
            </td>
            <td>
                  <code><span title="float">float</span>(&#39;inf&#39;)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>manage</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use the (async) context manager of the value
for setup/teardown.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>teardown_callback</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[..., <span title="typing.Any">Any</span>] | <span title="collections.abc.Callable">Callable</span>[..., <span title="collections.abc.Awaitable">Awaitable</span>[<span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional callback to call when the context is closed.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="SharedValue (fps._context.SharedValue)" href="#fps.SharedValue">SharedValue</a>[<span title="fps._context.T">T</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The shared value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="fps.Module" class="doc doc-heading">
            <code>Module</code>


</h2>


    <div class="doc doc-contents ">



        <p>A module allows to:</p>
<ul>
<li>run services,</li>
<li>share those services with other modules,</li>
<li>request services from other modules.</li>
</ul>
<p>The services are represented by values that can be published by producers
and borrowed by consumers. Consumers notify producers that their services
are not used anymore by dropping the corresponding borrowed values. Producers
are responsible for tearing down their services when stopping the application.</p>
<p>Modules can be configured through their <a class="autorefs autorefs-internal" title="__init__(name, prepare_timeout=1, start_timeout=1, stop_timeout=1, global_start_timeout=None)" href="#fps.Module.__init__"><code>__init__</code></a> method's
keyword arguments. Modules have three phases:</p>
<ul>
<li><a class="autorefs autorefs-internal" title="prepare()

  
      async
  " href="#fps.Module.prepare"><code>prepare</code></a>: called before the "start" phase.</li>
<li><a class="autorefs autorefs-internal" title="start()

  
      async
  " href="#fps.Module.start"><code>start</code></a>: called before running the application.</li>
<li><a class="autorefs autorefs-internal" title="stop()

  
      async
  " href="#fps.Module.stop"><code>stop</code></a>: called when shutting down the application.</li>
</ul>











  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="fps.Module.modules" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">modules</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">



    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" title="Module (fps._module.Module)" href="#fps.Module">Module</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The modules added by the current module, as a <code>dict</code> of module name to module instance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fps.Module.name" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">name</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">



    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The module's name.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fps.Module.parent" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parent</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">



    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Module (fps._module.Module)" href="#fps.Module">Module</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The module's parent, unless this is the root module which has no parent.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fps.Module.path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">path</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">



    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The module's path, as a period-separated sequence of module names.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="fps.Module.started" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">started</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">



    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="anyio.Event">Event</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An <code>Event</code> that is set when the module has started.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="fps.Module.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">prepare_timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">start_timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">stop_timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">global_start_timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name to give to the module.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prepare_timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time to wait (in seconds) for the "prepare" phase to complete.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>start_timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time to wait (in seconds) for the "start" phase to complete.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>stop_timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time to wait (in seconds) for the "stop" phase to complete.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>global_start_timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time to wait (in seconds) for the "prepare" and "start"
phases to complete.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.add_module" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_module</span><span class="p">(</span><span class="n">module_type</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Add a module as a child of the current module.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>module_type</code>
            </td>
            <td>
                  <code><span title="type">type</span>[&#39;Module&#39;] | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A <a class="autorefs autorefs-internal" href="#fps.Module">Module</a> type or a string pointing to a module type.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name to give to the module.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The module configuration.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.add_teardown_callback" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_teardown_callback</span><span class="p">(</span><span class="n">teardown_callback</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Register a callback that will be called when stopping the module. The callbacks
will be called in the inverse order than they were added.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>teardown_callback</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[..., <span title="typing.Any">Any</span>] | <span title="collections.abc.Callable">Callable</span>[..., <span title="collections.abc.Awaitable">Awaitable</span>[<span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The callback to add.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.all_freed" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">all_freed</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Wait for all published values to be freed, meaning that all borrowers have
dropped their values.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.done" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">done</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Notify that the current phase is done. This is especially useful when launching
background tasks, as otherwise the current phase would not complete:
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">anyio</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_task_group</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">fps</span><span class="w"> </span><span class="kn">import</span> <span class="n">Module</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MyModule</span><span class="p">(</span><span class="n">Module</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">create_task_group</span><span class="p">()</span> <span class="k">as</span> <span class="n">tg</span><span class="p">:</span>
            <span class="n">tg</span><span class="o">.</span><span class="n">start_toon</span><span class="p">(</span><span class="n">my_async_func</span><span class="p">)</span>
            <span class="n">tg</span><span class="o">.</span><span class="n">start_toon</span><span class="p">(</span><span class="n">other_async_func</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">done</span><span class="p">()</span>
</code></pre></div></p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.drop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">drop</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Drop a borrowed value, meaning that this module doesn't use it anymore.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to drop.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.drop_all" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">drop_all</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Drop all borrowed values.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.exit_app" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">exit_app</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Force the application to exit. This can be called from any module.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.freed" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">freed</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Wait for a published value to be free, meaning that all borrowers have dropped
the value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to be freed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.get" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">value_type</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Borrow a value from the current module's context or its parent's (if any).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value_type</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<span title="fps._module.T_Value">T_Value</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of the value to borrow.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time to wait for the value to be published.</p>
              </div>
            </td>
            <td>
                  <code><span title="float">float</span>(&#39;inf&#39;)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="fps._module.T_Value">T_Value</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The borrowed value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.prepare" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">prepare</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The "prepare" phase occurs before the "start" phase.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.put" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">put</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_borrowers</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="n">teardown_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">manage</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Publish a value in the current module context and its parent's (if any).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="fps._module.T_Value">T_Value</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to publish.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>types</code>
            </td>
            <td>
                  <code><span title="typing.Iterable">Iterable</span> | <span title="typing.Any">Any</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type(s) to publish the value as. If not provided, the type is inferred
from the value.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_borrowers</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The maximum number of simultaneous borrowers of the published value.</p>
              </div>
            </td>
            <td>
                  <code><span title="float">float</span>(&#39;inf&#39;)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>teardown_callback</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[..., <span title="typing.Any">Any</span>] | <span title="collections.abc.Callable">Callable</span>[..., <span title="collections.abc.Awaitable">Awaitable</span>[<span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A callback to call when the value is torn down.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>manage</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use the (async) context manager of the value for its setup/teardown.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="s1">&#39;asyncio&#39;</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Run the root module.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>backend</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The backend used to run ("asyncio" or "trio").</p>
              </div>
            </td>
            <td>
                  <code>&#39;asyncio&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.start" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The "start" phase occurs after the "prepare" phase. This is usually where
services are started and published as values, and other services are requested
and borrowed as values.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Module.stop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The "stop" phase occurs when the application is torn down.</p>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="fps.SharedValue" class="doc doc-heading">
            <code>SharedValue</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Generic">Generic</span>[<span title="fps._context.T">T</span>]</code></p>



        <p>A value that can be shared with so-called borrowers. A borrower borrows a shared value by
calling <code>await shared_value.get()</code>, which returns a <code>Value</code>. The shared value can be borrowed
any number of times at the same time, unless specified by <code>max_borrowers</code>. All borrowers must
drop their <code>Value</code> before the shared value can be closed. The shared value can be closed
explicitly by calling <code>await shared_value.aclose()</code>, or by using an async context manager.</p>











  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="fps.SharedValue.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">max_borrowers</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="n">manage</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">teardown_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">close_timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="fps._context.T">T</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The inner value that is shared.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_borrowers</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of times the shared value can be borrowed at the same time.</p>
              </div>
            </td>
            <td>
                  <code><span title="float">float</span>(&#39;inf&#39;)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>manage</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use the (async) context manager of the inner value
for setup/teardown.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>teardown_callback</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[..., <span title="typing.Any">Any</span>] | <span title="collections.abc.Callable">Callable</span>[..., <span title="collections.abc.Awaitable">Awaitable</span>[<span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The callback to call when closing the shared value.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>close_timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout to use when closing the shared value.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.SharedValue.aclose" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">aclose</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_exc_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_exc_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_exc_tb</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Wait for all borrowers to drop their value, and tear down the shared value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time to wait for all borrowers to drop their value.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TimeoutError">TimeoutError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the shared value could not be closed in time.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.SharedValue.freed" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">freed</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Wait for all borrowers to drop their value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time to wait for all borrowers to drop their value.</p>
              </div>
            </td>
            <td>
                  <code><span title="float">float</span>(&#39;inf&#39;)</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TimeoutError">TimeoutError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the shared value was not freed in time.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.SharedValue.get" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Borrow the shared value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time to wait to borrow the shared value.</p>
              </div>
            </td>
            <td>
                  <code><span title="float">float</span>(&#39;inf&#39;)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Value (fps._context.Value)" href="#fps.Value">Value</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The borrowed value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TimeoutError">TimeoutError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the value could not be borrowed in time.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="fps.Value" class="doc doc-heading">
            <code>Value</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Generic">Generic</span>[<span title="fps._context.T">T</span>]</code></p>



        <p>A <code>Value</code> can be obtained from a shared value by calling <code>await shared_value.get()</code>,
and can be dropped by calling <code>value.drop()</code>. The inner value can be accessed by
calling <code>value.unwrap()</code>, unless it was already dropped.</p>











  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="fps.Value.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">shared_value</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>shared_value</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="SharedValue (fps._context.SharedValue)" href="#fps.SharedValue">SharedValue</a>[<span title="fps._context.T">T</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The shared value this <code>Value</code> refers to.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Value.drop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">drop</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Drop the value.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="fps.Value.unwrap" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">unwrap</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Get the inner value that is shared.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the value was already dropped.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="fps._context.T">T</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The inner value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="fps.current_context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">current_context</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">



    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Context (fps._context.Context)" href="#fps.Context">Context</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current context, if any.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="LookupError">LookupError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there is no current context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="fps.get" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">value_type</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Get a value from the current context, with the given type.
The value will be returned if/when it is put in the context and when it accepts
to be borrowed (borrowing can be limited with a maximum number of borrowers).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value_type</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<span title="fps._context.T">T</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of the value to get.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time to wait to get the value.</p>
              </div>
            </td>
            <td>
                  <code><span title="float">float</span>(&#39;inf&#39;)</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Value (fps._context.Value)" href="#fps.Value">Value</a>[<span title="fps._context.T">T</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The borrowed <code>Value</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TimeoutError">TimeoutError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the value could not be borrowed in time.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="LookupError">LookupError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there is no current context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="fps.put" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">put</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_borrowers</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="n">manage</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">teardown_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Put a value in the current context so that it can be shared.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="fps._context.T">T</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to put in the context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>types</code>
            </td>
            <td>
                  <code><span title="typing.Iterable">Iterable</span> | <span title="typing.Any">Any</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type(s) to register the value as. If not
provided, the value type will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_borrowers</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of times the shared value can be borrowed at the same time.</p>
              </div>
            </td>
            <td>
                  <code><span title="float">float</span>(&#39;inf&#39;)</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>manage</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to use the (async) context manager of the value
for setup/teardown.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>teardown_callback</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[..., <span title="typing.Any">Any</span>] | <span title="collections.abc.Callable">Callable</span>[..., <span title="collections.abc.Awaitable">Awaitable</span>[<span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An optional callback to call when the context is closed.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="SharedValue (fps._context.SharedValue)" href="#fps.SharedValue">SharedValue</a>[<span title="fps._context.T">T</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The shared value.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="LookupError">LookupError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If there is no current context.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.top", "navigation.sections", "search.suggest", "search.highlight", "content.code.annotate", "content.code.copy"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>